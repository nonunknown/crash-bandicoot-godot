[gd_scene load_steps=12 format=2]

[ext_resource path="res://shaders/WindGrass/WindGrassScene.tscn" type="PackedScene" id=1]
[ext_resource path="res://gameplay/obj_player.tscn" type="PackedScene" id=2]
[ext_resource path="res://resources/portal.tscn" type="PackedScene" id=3]
[ext_resource path="res://modules/warp_room/first/model/md_first_warp.glb" type="PackedScene" id=4]
[ext_resource path="res://OST/menus/warp_room_theme.ogg" type="AudioStream" id=5]
[ext_resource path="res://Sounds/nigth_ambient.ogg" type="AudioStream" id=6]

[sub_resource type="SpatialMaterial" id=1]
flags_unshaded = true
vertex_color_use_as_albedo = true
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="GDScript" id=2]
script/source = "extends Camera

onready var player = Groups.get_first(Groups.PLAYER)
func _process(_delta):
	var player_pos = player.global_transform.origin
	get_parent().look_at(player_pos,Vector3.UP)
#	get_parent().look_at_from_position(get_parent().global_transform.origin,player_pos,Vector3.RIGHT)
	look_at(player_pos, Vector3.UP)
#	pass
"

[sub_resource type="ProceduralSky" id=3]
radiance_size = 4
sky_top_color = Color( 0.0117647, 0.0117647, 0.0117647, 1 )
sky_horizon_color = Color( 0.172549, 0.168627, 0.168627, 1 )
ground_bottom_color = Color( 0, 0, 0, 1 )
ground_horizon_color = Color( 0.172549, 0.168627, 0.168627, 1 )

[sub_resource type="Environment" id=4]
background_mode = 2
background_sky = SubResource( 3 )
ambient_light_color = Color( 0.717647, 0.717647, 0.717647, 1 )
ambient_light_energy = 1.88
ambient_light_sky_contribution = 0.69
ssao_enabled = true
ssao_radius = 1.7
ssao_intensity = 1.08
ssao_radius2 = 0.91
ssao_intensity2 = 2.74
ssao_bias = 0.129
ssao_light_affect = 0.16
ssao_ao_channel_affect = 0.39
ssao_quality = 0
ssao_blur = 1
ssao_edge_sharpness = 5.22
dof_blur_far_enabled = true
dof_blur_far_distance = 786.86

[sub_resource type="GDScript" id=5]
script/source = "extends SpotLight

var time = 0
func _ready():
	time = rand_range(0,60)

func _process(delta):
	time += delta;
	if time > 60: time = 0
	light_energy = clamp( cos(time) * 16 ,0,16)
	


"

[node name="Spatial" type="Spatial"]

[node name="WindGrass" parent="." instance=ExtResource( 1 )]
transform = Transform( 0.415221, 0, 0, 0, 0.415221, 0, 0, 0, 0.415221, 0, 1.17153, 0 )

[node name="md_first_warp" parent="." instance=ExtResource( 4 )]

[node name="Cube" parent="md_first_warp" index="1"]
material/0 = SubResource( 1 )

[node name="obj_player" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.74674, 2.09436, -3.66808 )

[node name="Position3D" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.64293, 0 )

[node name="Camera" type="Camera" parent="Position3D"]
transform = Transform( -1, 0, 3.25841e-07, 0, 1, 0, -3.25841e-07, 0, -1, 0, 1.41444, -6.21115 )
current = true
fov = 104.5
size = 0.48
far = 10000.0
script = SubResource( 2 )

[node name="Spatial" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.79848, 0, 1.34014, 0, 1.29004, 0, -0.602022, 0, 1.77747, 1.04443, 1.3085, -1.59289 )

[node name="Spatial2" parent="." instance=ExtResource( 3 )]
transform = Transform( 0.873723, 0, 1.15824, 0, 1.73614, 0, -0.486424, 0, 2.08045, -1.3832, 0.907907, 0.695253 )

[node name="Spatial3" parent="." instance=ExtResource( 3 )]
transform = Transform( -0.166776, 0, 1.9242, 0, 1.16103, 0, -0.575181, 0, -0.557929, 0.648147, 1.25883, 1.29727 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 4 )

[node name="ost_theme" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 5 )
volume_db = 6.832
autoplay = true

[node name="sfx_cricket" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
volume_db = -6.073
autoplay = true

[node name="SpotLight" type="SpotLight" parent="."]
transform = Transform( 0.69759, 0, -0.716497, 0, 1, 0, 0.716497, 0, 0.69759, 1.2884, 2.44607, -1.80711 )
light_color = Color( 0.32549, 0.843137, 0.0313726, 1 )
light_energy = 16.0
light_specular = 0.59
light_bake_mode = 2
shadow_bias = 8.09
shadow_contact = 1.0
spot_range = 4.3
spot_attenuation = 0.732044
spot_angle = 76.9
script = SubResource( 5 )

[node name="SpotLight2" type="SpotLight" parent="."]
transform = Transform( -0.963112, 0, -0.269102, 0, 1, 0, 0.269102, 0, -0.963112, 0.633722, 2.63065, 1.40528 )
light_color = Color( 0.32549, 0.843137, 0.0313726, 1 )
light_energy = 16.0
light_specular = 0.59
light_bake_mode = 2
shadow_bias = 8.09
shadow_contact = 1.0
spot_range = 3.04702
spot_attenuation = 0.732044
spot_angle = 63.2812
script = SubResource( 5 )

[node name="SpotLight3" type="SpotLight" parent="."]
transform = Transform( -0.482546, 0, 0.875871, 0, 1, 0, -0.875871, 0, -0.482546, -1.26195, 2.44607, 0.493406 )
light_color = Color( 0.32549, 0.843137, 0.0313726, 1 )
light_energy = 16.0
light_specular = 0.59
light_bake_mode = 2
shadow_bias = 8.09
shadow_contact = 1.0
spot_range = 4.3
spot_attenuation = 0.732044
spot_angle = 65.8054
script = SubResource( 5 )

[editable path="md_first_warp"]
